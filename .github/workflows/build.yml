name: Build
on:
  pull_request:
    paths-ignore:
      - "**.md"
  push:
    paths-ignore:
      - "**.md"
  schedule:
    - cron: "0 0 * * *" # daily at midnight

jobs:
  plugin_test_ubuntu:
    name: asdf plugin test (ubuntu)
    runs-on: ubuntu-latest
    steps:
      - name: asdf_plugin_test_ubuntu
        uses: asdf-vm/actions/plugin-test@v3
        with:
          command: postgres --version
  plugin_test_macos:
    name: asdf plugin test (macos)
    runs-on: macos-latest
    steps:
      - name: install dependencies
        run: brew install icu4c
      - name: wtf
        run: echo $HOMEBREW_PREFIX; ls -l $HOMEBREW_PREFIX/lib; ls -l $HOMEBREW_PREFIX/include; echo "===="; ls -l $HOMEBREW_PREFIX/Cellar/icu4c
      - name: asdf_plugin_test_macos
        uses: asdf-vm/actions/plugin-test@v3
        with:
          command: postgres --version
